<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户注册</title>
</head>
<body>
<div class="register-container">
    <h2>用户注册</h2>
    <form id="registerForm">
        <div>
            <label for="username">用户名:</label>
            <input type="text" id="username" name="username" required maxlength="20">
        </div>
        <div>
            <label for="nickName">昵称:</label>
            <input type="text" id="nickName" name="nickName" required maxlength="50">
        </div>
        <div>
            <label for="phone">手机号:</label>
            <input type="tel" id="phone" name="phone" required maxlength="20">
        </div>
        <div>
            <label for="email">邮箱:</label>
            <input type="email" id="email" name="email" required maxlength="30">
        </div>
        <div>
            <label for="password">密码:</label>
            <input type="password" id="password" name="password" required maxlength="32">
        </div>
        <div>
            <label for="confirmPassword">确认密码:</label>
            <input type="password" id="confirmPassword" name="confirmPassword" required>
        </div>
        <div>
            <label for="verificationCode">验证码:</label>
            <input type="text" id="verificationCode" name="verificationCode" required maxlength="4">
            <button type="button" id="getVerificationCode">获取验证码</button>
        </div>
        <div>
            <button type="submit">注册</button>
        </div>
    </form>
    <div>
        <p>已有账户? <a href="login.html">立即登录</a></p>
    </div>
</div>

<script>        // 验证码倒计时功能
const getVerificationCodeBtn = document.getElementById('getVerificationCode');
let countdown = 60;
let timer = null;

getVerificationCodeBtn.addEventListener('click', () => {
    const phone = document.getElementById('phone').value;
    if (!phone) {
        alert('请先填写手机号');
        return;
    }

    // 模拟发送验证码
    getVerificationCodeBtn.disabled = true;
    getVerificationCodeBtn.textContent = `重新发送(${countdown}s)`;

    timer = setInterval(() => {
        countdown--;
        getVerificationCodeBtn.textContent = `重新发送(${countdown}s)`;

        if (countdown <= 0) {
            clearInterval(timer);
            getVerificationCodeBtn.disabled = false;
            getVerificationCodeBtn.textContent = '获取验证码';
            countdown = 60;
        }
    }, 1000);

    alert('验证码已发送（模拟）：1234');
});

// 表单提交处理
document.getElementById('registerForm').addEventListener('submit', (e) => {
    e.preventDefault();

    // 获取表单数据
    const formData = new FormData(e.target);
    const userData = {
        username: formData.get('username'),
        nickName: formData.get('nickName'),
        phone: formData.get('phone'),
        email: formData.get('email'),
        password: formData.get('password'),
        confirmPassword: formData.get('confirmPassword'),
        verificationCode: formData.get('verificationCode')
    };

    // 前端验证
    if (!validateForm(userData)) {
        return;
    }

    // 模拟注册成功，跳转到登录页面
    alert('注册成功！');
    window.location.href = 'login.html';
});

// 表单验证函数
const validateForm = (data) => {
    // 检查必填字段
    if (!data.username || !data.nickName || !data.phone || !data.email || !data.password || !data.verificationCode) {
        alert('请填写所有必填字段');
        return false;
    }

    // 检查密码确认
    if (data.password !== data.confirmPassword) {
        alert('两次输入的密码不一致');
        return false;
    }

    // 检查验证码
    if (data.verificationCode !== '1234') {
        alert('验证码错误');
        return false;
    }

    return true;
};
</script>
</body>
</html>